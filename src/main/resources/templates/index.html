<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <title>Eme - Language translator and audio</title>
    
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/5.1.3/css/bootstrap.min.css}">

    <!-- Include Vue.js -->
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>

    <!-- Custom CSS -->
    <style>
        body {
            background-color: #f8f9fa;
        }

        h1, h2, h3, h4 {
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
            font-weight: 600;
        }

        .card {
            border: none;
            border-radius: 8px;
            margin-bottom: 2rem;
        }

        .card-header {
            background-color: #ffffff;
            border-bottom: none;
        }

        .card-body {
            background-color: #ffffff;
        }

        .card-title {
            margin-bottom: 0;
        }

        .anki-placeholder-info {
            font-size: 0.9rem;
            background: #e9ecef;
            padding: 1rem;
            border-radius: 4px;
            margin-bottom: 1rem;
        }
    </style>
</head>

<body>
<div class="container mt-5" id="app">
    <h1 class="mb-4">Eme</h1>

    <div th:if="${not #lists.isEmpty(errors)}" class="alert alert-danger">
        <h4>Error:</h4>
        <ul>
            <li th:each="error : ${errors}" th:text="${error}" class="mb-1"></li>
        </ul>
    </div>

    <div class="row justify-content-center">
        <div class="col-md-8">
            <form th:action="@{/generate}" method="post">

                <!-- Card: Source Text Options -->
                <div class="card shadow">
                    <div class="card-header">
                        <h2 class="card-title h5">Source Text Options</h2>
                    </div>
                    <div class="card-body">
                        <div class="mb-3">
                            <label for="text" class="form-label">Enter text for source text:</label>
                            <p class="small">Each line is a text entry.</p>
                            <textarea class="form-control" id="text" name="text" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="lang" class="form-label">Select Source Language:</label>
                            <select class="form-select" id="lang" name="lang">
                                <option value="cafr">Canadian French</option>
                                <option value="jp">Japanese</option>
                                <option value="kr">Korean</option>
                                <option value="es">Spanish</option>
                                <option value="fr">French</option>
                                <option value="en">English</option>
                                <option value="hi">Hindi</option>
                            </select>
                        </div>
                        <div class="form-check mb-2">
                            <input type="checkbox" class="form-check-input" id="source-audio" name="source-audio" v-model="sourceAudio">
                            <label class="form-check-label" for="source-audio">Source Audio</label>
                        </div>
                        <div class="form-check mb-2">
                            <input type="checkbox" class="form-check-input" id="sentence-generation" name="sentence-generation" v-model="sentenceGeneration">
                            <label class="form-check-label" for="sentence-generation">Generate Sentences</label>
                        </div>
                    </div>
                </div>

                <!-- Card: Translation Options -->
                <div class="card shadow" v-if="!translation || translation">
                    <div class="card-header">
                        <h2 class="card-title h5">Translation Options</h2>
                    </div>
                    <div class="card-body">
                        <div class="form-check mb-3">
                            <input type="checkbox" class="form-check-input" id="translation" name="translation" v-model="translation">
                            <label class="form-check-label" for="translation">Translate</label>
                        </div>
                        <div v-if="translation">
                            <div class="form-check mb-3">
                                <input type="checkbox" class="form-check-input" id="target-audio" name="target-audio" v-model="targetAudio">
                                <label class="form-check-label" for="target-audio">Target Audio</label>
                            </div>
                            <div class="mb-3">
                                <label for="target-lang" class="form-label">Select Target Language:</label>
                                <select class="form-select" id="target-lang" name="target-lang">
                                    <option value="en">English</option>
                                    <option value="jp">Japanese</option>
                                    <option value="kr">Korean</option>
                                    <option value="es">Spanish</option>
                                    <option value="fr">French</option>
                                    <option value="hi">Hindi</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card: Anki Card Options -->
                <div class="card shadow">
                    <div class="card-header">
                        <h2 class="card-title h5">Anki Card Options</h2>
                    </div>
                    <div class="card-body">
                        <div class="form-check mb-4">
                            <input type="checkbox" class="form-check-input" id="anki" name="anki" v-model="anki">
                            <label class="form-check-label" for="anki">Generate Anki Cards</label>
                        </div>

                        <!-- Show placeholders info if Anki is selected -->
                        <div class="anki-placeholder-info" v-if="anki">
                            <strong>Available placeholders:</strong>
                            <div>[source-text]</div>
                            <div v-if="sourceAudio">[source-audio]</div>
                            <div v-if="translation">[target-text]</div>
                            <div v-if="translation && targetAudio">[target-audio]</div>
                            <div v-if="sentenceGeneration">[sentence-latin]</div>
                            <div v-if="sentenceGeneration">[sentence-target]</div>
                            <div v-if="sentenceGeneration">[sentence-transliteration]</div>
                            <div v-if="sentenceGeneration">[sentence-source]</div>
                            <div v-if="sentenceGeneration">[sentence-structure]</div>
                        </div>

                        <div v-if="anki">
                            <div class="mb-3">
                                <label for="deck" class="form-label">Deck:</label>
                                <input type="text" class="form-control" id="deck" name="deck"/>
                            </div>
                            <div class="mb-3">
                                <label for="front" class="form-label">Front:</label>
                                <textarea class="form-control" id="front" name="front" rows="3" v-model="front"></textarea>
                                <div class="my-2">
                                    <a class="btn btn-secondary btn-sm m-1" href="#addFrontLineBreak" role="button"
                                       @click.prevent="addFrontLineBreak">
                                        Add line break
                                    </a>
                                    <a class="btn btn-secondary btn-sm m-1" href="#addFrontSourceText" role="button"
                                       @click.prevent="addFrontSourceText">
                                        Add source text
                                    </a>
                                    <a v-if="translation" class="btn btn-secondary btn-sm m-1" href="#addFrontTargetText" role="button"
                                       @click.prevent="addFrontTargetText">
                                        Add translated target text
                                    </a>
                                    <a v-if="sourceAudio" class="btn btn-secondary btn-sm m-1" href="#addFrontSourceAudio" role="button"
                                       @click.prevent="addFrontSourceAudio">
                                        Add source audio
                                    </a>
                                    <a v-if="translation && targetAudio" class="btn btn-secondary btn-sm m-1" href="#addFrontTargetAudio"
                                       role="button" @click.prevent="addFrontTargetAudio">
                                        Add translated target audio
                                    </a>
                                    <a v-if="sentenceGeneration" class="btn btn-secondary btn-sm m-1" href="#addFrontSentenceLatin"
                                       role="button" @click.prevent="addFrontSentenceLatin">
                                        Add sentence latin
                                    </a>
                                    <a v-if="sentenceGeneration" class="btn btn-secondary btn-sm m-1" href="#addFrontSentenceTarget"
                                       role="button" @click.prevent="addFrontSentenceTarget">
                                        Add sentence target
                                    </a>
                                    <a v-if="sentenceGeneration" class="btn btn-secondary btn-sm m-1" href="#addFrontSentenceTransliteration"
                                       role="button" @click.prevent="addFrontSentenceTransliteration">
                                        Add sentence transliteration
                                    </a>
                                    <a v-if="sentenceGeneration" class="btn btn-secondary btn-sm m-1" href="#addFrontSentenceSource"
                                       role="button" @click.prevent="addFrontSentenceSource">
                                        Add sentence source
                                    </a>
                                    <a v-if="sentenceGeneration" class="btn btn-secondary btn-sm m-1" href="#addFrontSentenceStructure"
                                       role="button" @click.prevent="addFrontSentenceStructure">
                                        Add sentence structure
                                    </a>
                                </div>
                                <div class="mt-2" v-if="sentenceGeneration">
                                    <button type="button" class="btn btn-success btn-sm" @click="setOptimalHindiCard">
                                        🇮🇳 Optimal Hindi Card
                                    </button>
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="back" class="form-label">Back:</label>
                                <textarea class="form-control" id="back" name="back" rows="3" v-model="back"></textarea>
                                <div class="my-2">
                                    <a class="btn btn-secondary btn-sm m-1" href="#addBackLineBreak" role="button"
                                       @click.prevent="addBackLineBreak">
                                        Add line break
                                    </a>
                                    <a class="btn btn-secondary btn-sm m-1" href="#addBackSourceText" role="button"
                                       @click.prevent="addBackSourceText">
                                        Add source text
                                    </a>
                                    <a v-if="translation" class="btn btn-secondary btn-sm m-1" href="#addBackTargetText" role="button"
                                       @click.prevent="addBackTargetText">
                                        Add translated target text
                                    </a>
                                    <a v-if="sourceAudio" class="btn btn-secondary btn-sm m-1" href="#addBackSourceAudio" role="button"
                                       @click.prevent="addBackSourceAudio">
                                        Add source audio
                                    </a>
                                    <a v-if="translation && targetAudio" class="btn btn-secondary btn-sm m-1" href="#addBackTargetAudio"
                                       role="button" @click.prevent="addBackTargetAudio">
                                        Add translated target audio
                                    </a>
                                    <a v-if="sentenceGeneration" class="btn btn-secondary btn-sm m-1" href="#addBackSentenceLatin"
                                       role="button" @click.prevent="addBackSentenceLatin">
                                        Add sentence latin
                                    </a>
                                    <a v-if="sentenceGeneration" class="btn btn-secondary btn-sm m-1" href="#addBackSentenceTarget"
                                       role="button" @click.prevent="addBackSentenceTarget">
                                        Add sentence target
                                    </a>
                                    <a v-if="sentenceGeneration" class="btn btn-secondary btn-sm m-1" href="#addBackSentenceTransliteration"
                                       role="button" @click.prevent="addBackSentenceTransliteration">
                                        Add sentence transliteration
                                    </a>
                                    <a v-if="sentenceGeneration" class="btn btn-secondary btn-sm m-1" href="#addBackSentenceSource"
                                       role="button" @click.prevent="addBackSentenceSource">
                                        Add sentence source
                                    </a>
                                    <a v-if="sentenceGeneration" class="btn btn-secondary btn-sm m-1" href="#addBackSentenceStructure"
                                       role="button" @click.prevent="addBackSentenceStructure">
                                        Add sentence structure
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Submit Button -->
                <button type="submit" class="btn btn-primary btn-lg w-100 mb-5">
                    Generate
                </button>
            </form>
        </div>
    </div>
</div>

<!-- jQuery and Bootstrap Bundle JS -->
<script th:src="@{/webjars/jquery/3.6.0/jquery.min.js}" type="application/javascript"></script>
<script th:src="@{/webjars/bootstrap/5.1.3/js/bootstrap.bundle.min.js}" type="application/javascript"></script>

<script>
    var app = new Vue({
        el: '#app',
        data: {
            targetAudio: false,
            sourceAudio: false,
            translation: false,
            anki: false,
            sentenceGeneration: false,
            front: '',
            back: ''
        },
        methods: {
            addFrontLineBreak: function () {
                this.front += "<br>\n";
            },
            addFrontSourceText: function () {
                this.front += "[source-text]\n";
            },
            addFrontTargetText: function () {
                this.front += "[target-text]\n";
            },
            addFrontSourceAudio: function () {
                this.front += "[source-audio]\n";
            },
            addFrontTargetAudio: function () {
                this.front += "[target-audio]\n";
            },
            addBackLineBreak: function () {
                this.back += "<br>\n";
            },
            addBackSourceText: function () {
                this.back += "[source-text]\n";
            },
            addBackTargetText: function () {
                this.back += "[target-text]\n";
            },
            addBackSourceAudio: function () {
                this.back += "[source-audio]\n";
            },

            addBackTargetAudio: function () {
                this.back += "[target-audio]\n";
            },
            addFrontSentenceLatin: function () {
                this.front += "[sentence-latin]\n";
            },
            addFrontSentenceTarget: function () {
                this.front += "[sentence-target]\n";
            },
            addFrontSentenceTransliteration: function () {
                this.front += "[sentence-transliteration]\n";
            },
            addFrontSentenceSource: function () {
                this.front += "[sentence-source]\n";
            },
            addFrontSentenceStructure: function () {
                this.front += "[sentence-structure]\n";
            },
            addBackSentenceLatin: function () {
                this.back += "[sentence-latin]\n";
            },
            addBackSentenceTarget: function () {
                this.back += "[sentence-target]\n";
            },
            addBackSentenceTransliteration: function () {
                this.back += "[sentence-transliteration]\n";
            },
            addBackSentenceSource: function () {
                this.back += "[sentence-source]\n";
            },
            addBackSentenceStructure: function () {
                this.back += "[sentence-structure]\n";
            },
        }
    })
</script>
</body>
</html>
